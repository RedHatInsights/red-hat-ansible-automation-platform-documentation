<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.15">
<title>Red Hat Ansible Automation Platform Operator Installation Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article Role ARG Spec">
<div id="header">
<h1>Red Hat Ansible Automation Platform Operator Installation Guide</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Thank you for your interest in Red Hat Ansible Automation Platform. Ansible Automation Platform is a commercial offering that helps teams manage complex multi-tier deployments by adding control, knowledge, and delegation to Ansible-powered environments.</p>
</div>
<div class="paragraph">
<p>This guide helps you to understand the installation requirements and processes behind installing the Ansible Automation Platform operator on OpenShift Container Platform.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="operator-install-planning">1. Planning your Red Hat Ansible Automation Platform operator installation on Red Hat OpenShift Container Platform</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>Red Hat Ansible Automation Platform is supported on both Red Hat Enterprise Linux 8 and Red Hat Openshift.</p>
</div>
<div class="paragraph">
<p>OpenShift operators help install and automate day-2 operations of complex, distributed software on Red Hat OpenShift Container Platform. The Ansible Automation Platform Operator enables you to deploy and manage Ansible Automation Platform components on Red Hat OpenShift Container Platform.</p>
</div>
<div class="paragraph">
<p>You can use this section to help plan your Red Hat Ansible Automation Platform installation on your Red Hat OpenShift Container Platform environment. Before installing, review the supported installation scenarios to determine which meets your requirements.</p>
</div>
<div class="sect2">
<h3 id="con-about-operator_operator-install-planning">1.1. About Ansible Automation Platform Operator</h3>
<div class="paragraph _abstract">
<p>The Ansible Automation Platform Operator provides cloud-native, push-button deployment of new Ansible Automation Platform instances in your OpenShift environment.
The Ansible Automation Platform Operator includes resource types to deploy and manage instances of Automation controller and Private Automation hub. It also includes automation controller job resources for defining and launching jobs inside your automation controller deployments. </p>
</div>
<div class="paragraph">
<p>Deploying Ansible Automation Platform instances with a Kubernetes native operator offers several advantages over launching instances from a playbook deployed on Red Hat OpenShift Container Platform, including upgrades and full lifecycle support for your Red Hat Ansible Automation Platform deployments.</p>
</div>
<div class="paragraph">
<p>You can install the Ansible Automation Platform Operator from the Red Hat Operators catalog in OperatorHub.</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-operator-ocp-version_operator-install-planning">1.2. OpenShift Container Platform version compatibility</h3>
<div class="paragraph _abstract">
<p>The Ansible Automation Platform Operator to install Ansible Automation Platform 2.1 is available on OpenShift Container Platform 4.7 and later versions.</p>
</div>
</div>
<div class="sect2">
<h3 id="con-ocp-supported-install_operator-install-planning">1.3. Supported installation scenarios for Red Hat OpenShift Container Platform</h3>
<div class="paragraph">
<p>You can use the OperatorHub on the Red Hat OpenShift Container Platform web console to install Ansible Automation Platform Operator.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can install Ansible Automation Platform Operator from the OpenShift Container Platform command-line interface (CLI), <code>oc</code>.</p>
</div>
<div class="paragraph">
<p>Follow one of the workflows below to install the Ansible Automation Platform Operator and use it to install the components of Ansible Automation Platform that you require.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Automation controller and customer resources first, then automation hub and customer resources;</p>
</li>
<li>
<p>Automation hub and customer resources first, then automation controller and customer resources;</p>
</li>
<li>
<p>Automation controller and customer resources;</p>
</li>
<li>
<p>Automation hub and custom resources.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="con-operator-custom-resources_operator-install-planning">1.4. Custom resources</h3>
<div class="paragraph">
<p>You can define custom resources for each primary installation workflows.</p>
</div>
</div>
<div class="sect2">
<h3 id="con-operator-additional-resources_operator-install-planning">1.5. Additional resources</h3>
<div class="ulist">
<ul>
<li>
<p>See <a href="https://docs.openshift.com/container-platform/latest/operators/understanding/olm-understanding-operatorhub.html#olm-understanding-operatorhub">Understanding OperatorHub</a> to learn more about OpenShift Container Platform OperatorHub.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly-install-aap-operator">2. Installing the Red Hat Ansible Automation Platform operator on Red Hat OpenShift Container Platform</h2>
<div class="sectionbody">
<div class="ulist _abstract">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed the Red Hat Ansible Automation Platform catalog in Operator Hub.</p>
</li>
</ul>
</div>
<div id="proc-install-aap-operator" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Red Hat OpenShift Container Platform clusters running on AWS do not support ReadWriteMany without adding NFS or other storage.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to Red Hat OpenShift Container Platform.</p>
</li>
<li>
<p>Navigate to <strong>Operators</strong> &#8594; <strong>OperatorHub</strong>.</p>
</li>
<li>
<p>Search for the Red Hat Ansible Automation Platform operator and click <strong>Install</strong>.</p>
</li>
<li>
<p>Select an <strong>Installation Mode</strong>, <strong>Installed Namespace</strong>, and <strong>Approval Strategy</strong>.</p>
</li>
<li>
<p>Click <strong>Install</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The installation process will begin. When installation is complete, a modal will appear notifying you that the Red Hat Ansible Automation Platform operator is installed in the specified namespace.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click <strong>View Operator</strong> to view your newly installed Red Hat Ansible Automation Platform operator.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-controller-operator">3. Installing and configuring automation controller on Red Hat OpenShift Container Platform web console</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You can use these instructions to install the automation controller operator on Red Hat OpenShift Container Platform, specify custom resources, and deploy Ansible Automation Platform with an external database.</p>
</div>
<div class="sect2">
<h3 id="_prerequisites">3.1. Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>You have installed the Red Hat Ansible Automation Platform catalog in Operator Hub.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_installing_the_automation_controller_operator">3.2. Installing the automation controller operator</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to <strong>Operators</strong> &gt; <strong>Installed Operators</strong>, then click on the <strong>Ansible Automation Platform</strong> operator.</p>
</li>
<li>
<p>Locate the <strong>Automation controller</strong> tab, then click <strong>Create instance</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can proceed with configuring the instance using either the Form View or YAML view.</p>
</div>
<div class="sect3">
<h4 id="proc-controller-route-options_installing-contr-operator">3.2.1. Configure your automation controller operator route options</h4>
<div class="paragraph">
<p>The Red Hat Ansible Automation Platform operator installation form allows you to further configure your automation controller operator route options under <strong>Advanced configuration</strong>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Advanced configuration</strong>.</p>
</li>
<li>
<p>Under <strong>Tower Ingress type</strong>, click the drop-down menu and select <strong>Route</strong>.</p>
</li>
<li>
<p>Under <strong>Route DNS host</strong>, enter a common host name that the route answers to.</p>
</li>
<li>
<p>Under <strong>Route TLS termination mechanism</strong>, click the drop-down menu and select <strong>Edge</strong> or <strong>Passthrough</strong>.</p>
</li>
<li>
<p>Under <strong>Route TLS credential secret</strong>, click the drop-down menu and select a secret from the list.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-hub-ingress-options_installing-contr-operator">3.2.2. Configure the Ingress type for your automation hub operator</h4>
<div class="paragraph">
<p>The Red Hat Ansible Automation Platform operator installation form allows you to further configure your automation hub operator Ingress under <strong>Advanced configuration</strong>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Advanced Configuration</strong>.</p>
</li>
<li>
<p>Under <strong>Ingress type</strong>, click the drop-down menu and select <strong>Ingress</strong>.</p>
</li>
<li>
<p>Under <strong>Ingress annotations</strong>, enter any annotations to add to the ingress.</p>
</li>
<li>
<p>Under <strong>Ingress TLS secret</strong>, click the drop-down menu and select a secret from the list.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once you have configured your automation controller operator, click <strong>Create</strong> at the bottom of the form view. Red Hat OpenShift Container Platform will now create the pods. This may take a few minutes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View progress by navigating to <strong>Workloads</strong> &#8594; <strong>Pods</strong> and locating the newly created instance.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="proc-operator-external-db-controller">3.3. Configuring an external database for automation controller on Red Hat Ansible Automation Platform operator</h3>
<div class="paragraph _abstract">
<p>For users who prefer to deploy Ansible Automation Platform with an external database, they can do so by configuring a secret with instance credentials and connection information, then applying it to their cluster using the <code>oc create</code> command.</p>
</div>
<div class="paragraph">
<p>By default, the Red Hat Ansible Automation Platform operator automatically creates and configures a managed PostgreSQL pod in the same namespace as your Ansible Automation Platform deployment. A user may instead choose to use an external database if they prefer to use a dedicated node to ensure dedicated resources or to manually manage backups, upgrades, or performance tweaks. The following section outlines the steps to configure an external database for your automation controller on a Ansible Automation Platform operator.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>The external database must be a PostgreSQL database that is the version supported by the current release of Ansible Automation Platform.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Ansible Automation Platform 2.0 and 2.1 supports PostgreSQL 12.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>The external postgres instance credentials and connection information will need to be stored in a secret, which will then be set on the automation controller spec.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a <code>postgres_configuration_secret</code> .yaml file, following the template below:</p>
<div class="listingblock">
<div class="content">
<pre>apiVersion: v1
kind: Secret
metadata:
  name: external-postgres-configuration
  namespace: &lt;target_namespace&gt; <b class="conum">(1)</b>
stringData:
  host: &lt;external_ip_or_url_resolvable_by_the_cluster&gt; <b class="conum">(2)</b>
  port: &lt;external_port&gt; <b class="conum">(3)</b>
  database: &lt;desired_database_name&gt;
  username: &lt;username_to_connect_as&gt;
  password: &lt;password_to_connect_with&gt; <b class="conum">(4)</b>
  sslmode: prefer <b class="conum">(5)</b>
  type: unmanaged
type: Opaque</pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Namespace to create the secret in. This should be the same namespace you wish to deploy to.</p>
</li>
<li>
<p>The resolvable hostname for your database node.</p>
</li>
<li>
<p>External port defaults to <code>5432</code>.</p>
</li>
<li>
<p>Value for variable <code>password</code> should not contain single or double quotes (', ") or backslashes (\) to avoid any issues during deployment, backup or restoration.</p>
</li>
<li>
<p>The variable <code>sslmode</code> is valid for <code>external</code> databases only. The allowed values are: <code><strong>prefer</strong></code>, <code><strong>disable</strong></code>, <code><strong>allow</strong></code>, <code><strong>require</strong></code>, <code><strong>verify-ca</strong></code>, and <code><strong>verify-full</strong></code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Apply <code>external-postgres-configuration-secret.yml</code> to your cluster using the <code>oc create</code> command.</p>
<div class="listingblock">
<div class="content">
<pre>$ oc create -f external-postgres-configuration-secret.yml</pre>
</div>
</div>
</li>
<li>
<p>When creating your <code>AutomationController</code> custom resource object, specify the secret on your spec, following the example below:</p>
<div class="listingblock">
<div class="content">
<pre>apiVersion: awx.ansible.com/v1beta1
kind: AutomationController
metadata:
  name: controller-dev
spec:
  postgres_configuration_secret: external-postgres-configuration</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2 _additional-resources">
<h3 id="_additional_resources">3.4. Additional resources</h3>
<div class="ulist">
<ul>
<li>
<p>For more information on running operators on OpenShift Container Platform, navigate to the <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/">OpenShift Container Platform product documentation</a> and click the <em>Operators - Working with Operators in OpenShift Container Platform</em> guide.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-hub-operator">4. Installing and configuring automation hub on Red Hat OpenShift Container Platform web console</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You can use these instructions to install the automation hub operator on Red Hat OpenShift Container Platform, specify custom resources, and deploy Ansible Automation Platform with an external database.</p>
</div>
<div class="sect2">
<h3 id="_prerequisites_2">4.1. Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>You have installed the Red Hat Ansible Automation Platform operator in Operator Hub.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_installing_the_automation_hub_operator">4.2. Installing the automation hub operator</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to <strong>Operators</strong> &gt; <strong>Installed Operators</strong>.</p>
</li>
<li>
<p>Locate the <strong>Automation hub</strong> entry, then click <strong>Create instance</strong>.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="con_storage-options-for-operator-installation-on-ocp_installing-hub-operator">4.2.1. Storage options for Ansible Automation Platform Operator installation on Red Hat OpenShift Container Platform</h4>
<div class="paragraph">
<p>If you are using file-based storage and your installation scenario includes automation hub, ensure that you change the <code>ReadWriteOnce</code> default storage option for Ansible Automation Platform Operator to <code>ReadWriteMany</code>.</p>
</div>
<div class="paragraph">
<p>Automation hub requires <code>ReadWriteMany</code> storage, Azure Blob storage, or an s3-compliant storage for operation because multiple pods responsible for upload and download of content (for example, collections) need access to the same content. Multiple pods can have access to the same persistent volume claim (PVC) as long as you select the <code>ReadWriteMany</code> storage option.</p>
</div>
<div class="paragraph">
<p>In addition, OpenShift Data Foundation provides a <code>ReadWriteMany</code> or S3-compliant implementation. Also, an NFS storage configuration can be setup to support <code>ReadWriteMany</code> and is often the simplest approach. This, however, introduces the NFS server as a potential single point of failure.</p>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.openshift.com/container-platform/4.9/storage/persistent_storage/persistent-storage-nfs.html">Persistent storage using NFS</a> in the OpenShift Container Platform <em>Storage</em> guide</p>
</li>
<li>
<p>IBM&#8217;s <a href="https://www.ibm.com/support/pages/how-do-i-create-storage-class-nfs-dynamic-storage-provisioning-openshift-environment">How do I create a storage class for NFS dynamic storage provisioning in an OpenShift environment?</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="proc_provision-ocp-storage-with-readwritemany-access-mode_installing-hub-operator">Provisioning OCP storage with <code>ReadWriteMany</code> access mode</h5>
<div class="paragraph">
<p>To ensure successful installation of Ansible Automation Platform Operator, set the storage type for automation hub to <code>ReadWriteMany</code> access mode by completing the following steps.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In your automation hub instance, click the <strong>File for Storage Type</strong> drop-down list and select <code>ReadWriteMany</code>.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="proc-hub-route-options_installing-hub-operator">4.2.2. Configure your automation hub operator route options</h4>
<div class="paragraph">
<p>The Red Hat Ansible Automation Platform operator installation form allows you to further configure your automation hub operator route options under <strong>Advanced configuration</strong>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Advanced configuration</strong>.</p>
</li>
<li>
<p>Under <strong>Ingress type</strong>, click the drop-down menu and select <strong>Route</strong>.</p>
</li>
<li>
<p>Under <strong>Route DNS host</strong>, enter a common host name that the route answers to.</p>
</li>
<li>
<p>Under <strong>Route TLS termination mechanism</strong>, click the drop-down menu and select <strong>Edge</strong> or <strong>Passthrough</strong>.</p>
</li>
<li>
<p>Under <strong>Route TLS credential secret</strong>, click the drop-down menu and select a secret from the list.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-hub-ingress-options_installing-hub-operator">4.2.3. Configure the Ingress type for your automation hub operator</h4>
<div class="paragraph">
<p>The Red Hat Ansible Automation Platform operator installation form allows you to further configure your automation hub operator Ingress under <strong>Advanced configuration</strong>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Advanced Configuration</strong>.</p>
</li>
<li>
<p>Under <strong>Ingress type</strong>, click the drop-down menu and select <strong>Ingress</strong>.</p>
</li>
<li>
<p>Under <strong>Ingress annotations</strong>, enter any annotations to add to the ingress.</p>
</li>
<li>
<p>Under <strong>Ingress TLS secret</strong>, click the drop-down menu and select a secret from the list.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once you have configured your automation hub operator, click <strong>Create</strong> at the bottom of the form view. Red Hat OpenShift Container Platform will now create the pods. This may take a few minutes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View progress by navigating to <strong>Workloads</strong> &#8594; <strong>Pods</strong> and locating the newly created instance.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="proc-access-hub-operator-ui_installing-hub-operator">4.3. Accessing the automation hub user interface</h3>
<div class="paragraph">
<p>You can access the automation hub interface once all pods have successfully launched.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to <strong>Networking</strong> &#8594; <strong>Routes</strong>.</p>
</li>
<li>
<p>Under <strong>Location</strong>, click on the URL for your automation hub instance.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The automation hub user interface will launch, You can sign in with the admin credentials specified during the operator configuration process.</p>
</div>
</div>
<div class="sect2">
<h3 id="proc-operator-external-db-hub">4.4. Configuring an external database for automation hub on Red Hat Ansible Automation Platform operator</h3>
<div class="paragraph _abstract">
<p>For users who prefer to deploy Ansible Automation Platform with an external database, they can do so by configuring a secret with instance credentials and connection information, then applying it to their cluster using the <code>oc create</code> command.</p>
</div>
<div class="paragraph">
<p>By default, the Red Hat Ansible Automation Platform operator automatically creates and configures a managed PostgreSQL pod in the same namespace as your Ansible Automation Platform deployment. A user may instead choose to use an external database if they prefer to use a dedicated node to ensure dedicated resources or to manually manage backups, upgrades, or performance tweaks. The following section outlines the steps to configure an external database for your automation hub on a Ansible Automation Platform operator.</p>
</div>
<div class="paragraph">
<div class="title">Prerequisite</div>
<p>The external database must be a PostgreSQL database that is the version supported by the current release of Ansible Automation Platform.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Ansible Automation Platform 2.0 and 2.1 supports PostgreSQL 12.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>The external postgres instance credentials and connection information will need to be stored in a secret, which will then be set on the automation hub spec.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a <code>postgres_configuration_secret</code> .yaml file, following the template below:</p>
<div class="listingblock">
<div class="content">
<pre>apiVersion: v1
kind: Secret
metadata:
  name: external-postgres-configuration
  namespace: &lt;target_namespace&gt; <b class="conum">(1)</b>
stringData:
  host: &lt;external_ip_or_url_resolvable_by_the_cluster&gt; <b class="conum">(2)</b>
  port: &lt;external_port&gt; <b class="conum">(3)</b>
  database: &lt;desired_database_name&gt;
  username: &lt;username_to_connect_as&gt;
  password: &lt;password_to_connect_with&gt; <b class="conum">(4)</b>
  sslmode: prefer <b class="conum">(5)</b>
  type: unmanaged
type: Opaque</pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Namespace to create the secret in. This should be the same namespace you wish to deploy to.</p>
</li>
<li>
<p>The resolvable hostname for your database node.</p>
</li>
<li>
<p>External port defaults to <code>5432</code>.</p>
</li>
<li>
<p>Value for variable <code>password</code> should not contain single or double quotes (', ") or backslashes (\) to avoid any issues during deployment, backup or restoration.</p>
</li>
<li>
<p>The variable <code>sslmode</code> is valid for <code>external</code> databases only. The allowed values are: <code><strong>prefer</strong></code>, <code><strong>disable</strong></code>, <code><strong>allow</strong></code>, <code><strong>require</strong></code>, <code><strong>verify-ca</strong></code>, and <code><strong>verify-full</strong></code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Apply <code>external-postgres-configuration-secret.yml</code> to your cluster using the <code>oc create</code> command.</p>
<div class="listingblock">
<div class="content">
<pre>$ oc create -f external-postgres-configuration-secret.yml</pre>
</div>
</div>
</li>
<li>
<p>When creating your <code>AutomationHub</code> custom resource object, specify the secret on your spec, following the example below:</p>
<div class="listingblock">
<div class="content">
<pre>apiVersion: awx.ansible.com/v1beta1
kind: AutomationHub
metadata:
  name: hub-dev
spec:
  postgres_configuration_secret: external-postgres-configuration</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2 _additional-resources">
<h3 id="_additional_resources_2">4.5. Additional resources</h3>
<div class="ulist">
<ul>
<li>
<p>For more information on running operators on OpenShift Container Platform, navigate to the <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/">OpenShift Container Platform product documentation</a> and click the <em>Operators - Working with Operators in OpenShift Container Platform</em> guide.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-aap-operator-cli">5. Installing Ansible Automation Platform Operator from the OpenShift Container Platform CLI</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>Use these instructions to install the Ansible Automation Platform Operator on Red Hat OpenShift Container Platform from the OpenShift Container Platform command-line interface (CLI) using the <code class="command">oc</code> command.</p>
</div>
<div class="sect2">
<h3 id="_prerequisites_3">5.1. Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>Access to Red Hat OpenShift Container Platform using an account with operator installation permissions.</p>
</li>
<li>
<p>The OpenShift Container Platform CLI <code class="command">oc</code> command is installed on your local system. Refer to <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.9/html/cli_tools/openshift-cli-oc#installing-openshift-cli">Installing the OpenShift CLI</a> in the Red Hat OpenShift Container Platform product documentation for further information.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="proc-install-cli-aap-operatorinstalling-aap-operator-cli">5.2. Subscribing a namespace to an operator using the OpenShift Container Platform CLI</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a project for the operator</p>
<div class="listingblock">
<div class="content">
<pre>oc new-project ansible-automation-platform</pre>
</div>
</div>
</li>
<li>
<p>Create a file called <code class="filename">sub.yaml</code>.</p>
</li>
<li>
<p>Add the following YAML code to the <code class="filename">sub.yaml</code> file.</p>
<div class="listingblock">
<div class="content">
<pre>---
apiVersion: v1
kind: Namespace
metadata:
  labels:
    openshift.io/cluster-monitoring: "true"
  name: ansible-automation-platform
---
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: ansible-automation-platform-operator
  namespace: ansible-automation-platform
spec:
  targetNamespaces:
    - ansible-automation-platform
---
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: ansible-automation-platform
  namespace: ansible-automation-platform
spec:
  channel: 'stable-2.1'
  installPlanApproval: Automatic
  name: ansible-automation-platform-operator
  source: redhat-operators
  sourceNamespace: openshift-marketplace
---
apiVersion: automationcontroller.ansible.com/v1beta1
kind: AutomationController
metadata:
  name: example
  namespace: ansible-automation-platform
spec:
  create_preload_data: true
  route_tls_termination_mechanism: Edge
  garbage_collect_secrets: false
  loadbalancer_port: 80
  image_pull_policy: IfNotPresent
  projects_storage_size: 8Gi
  task_privileged: false
  projects_storage_access_mode: ReadWriteMany
  projects_persistence: false
  replicas: 1
  admin_user: admin
  loadbalancer_protocol: http
  nodeport_port: 30080</pre>
</div>
</div>
<div class="paragraph">
<p>This file creates a <code>Subscription</code> object called <code><em>ansible-automation-platform</em></code> that subscribes the <code>ansible-automation-platform</code> namespace to the <code>ansible-automation-platform-operator</code> operator.</p>
</div>
<div class="paragraph">
<p>It then creates an <code>AutomationController</code> object called <code><em>example</em></code> in the <code>ansible-automation-platform</code> namespace.</p>
</div>
<div class="paragraph">
<p>To change the Automation controller name from <code><em>example</em></code>, edit the <em>name</em> field in the <code>kind: AutomationController</code> section of <code class="filename">sub.yaml</code> and replace <code><em>&lt;automation_controller_name&gt;</em></code> with the name you want to use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apiVersion: automationcontroller.ansible.com/v1beta1
kind: AutomationController
metadata:
  name: <em>&lt;automation_controller_name&gt;</em>
  namespace: ansible-automation-platform</pre>
</div>
</div>
</li>
<li>
<p>Run the <code class="command"><strong>oc apply</strong></code> command to create the objects specified in the <code class="filename">sub.yaml</code> file:</p>
<div class="listingblock">
<div class="content">
<pre>oc apply -f sub.yaml</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>To verify that the namespace has been successfully subscribed to the <code>ansible-automation-platform-operator</code> operator, run the <code class="command"><strong>oc get subs</strong></code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ oc get subs -n ansible-automation-platform</pre>
</div>
</div>
<div class="paragraph">
<p>For further information about subscribing namespaces to operators, see <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.9/html/operators/user-tasks#olm-installing-operator-from-operatorhub-using-cli_olm-installing-operators-in-namespace">Installing from OperatorHub using the CLI</a> in the Red Hat OpenShift Container Platform <em>Operators</em> guide.</p>
</div>
<div class="paragraph">
<p>You can use the OpenShift Container Platform CLI to fetch the web address and the password of the Automation controller that you created.</p>
</div>
</div>
<div class="sect2">
<h3 id="proc-cli-get-controller-pwdinstalling-aap-operator-cli">5.3. Fetching Automation controller login details from the OpenShift Container Platform CLI</h3>
<div class="paragraph">
<p>To login to the Automation controller, you need the web address and the password.</p>
</div>
<div class="sect3">
<h4 id="_fetching_the_automation_controller_web_address">5.3.1. Fetching the automation controller web address</h4>
<div class="paragraph">
<p>A Red Hat OpenShift Container Platform route exposes a service at a host name, so that external clients can reach it by name.
When you created the automation controller instance, a route was created for it.
The route inherits the name that you assigned to the automation controller object in the YAML file.</p>
</div>
<div class="paragraph">
<p>Use the following command to fetch the routes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc get routes -n <em>&lt;controller_namespace&gt;</em></pre>
</div>
</div>
<div class="paragraph">
<p>In the following example, the <code><em>example</em></code> automation controller is running in the <code><em>ansible-automation-platform</em></code> namespace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ oc get routes -n ansible-automation-platform

NAME      HOST/PORT                                              PATH   SERVICES          PORT   TERMINATION     WILDCARD
example   example-ansible-automation-platform.apps-crc.testing          example-service   http   edge/Redirect   None</pre>
</div>
</div>
<div class="paragraph">
<p>The address for the automation controller instance is <code>example-ansible-automation-platform.apps-crc.testing</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fetching_the_automation_controller_password">5.3.2. Fetching the automation controller password</h4>
<div class="paragraph">
<p>The YAML block for the automation controller instance in <code class="filename">sub.yaml</code> assigns values to the <em>name</em> and <em>admin_user</em> keys.
Use these values in the following command to fetch the password for the automation controller instance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc get secret/&lt;controller_name&gt;-&lt;admin_user&gt;-password -o yaml</pre>
</div>
</div>
<div class="paragraph">
<p>The default value for <em>admin_user</em> is <code><em>admin</em></code>. Modify the command if you changed the admin username in <code class="filename">sub.yaml</code>.</p>
</div>
<div class="paragraph">
<p>The following example retrieves the password for an automation controller object called <code><em>example</em></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>oc get secret/example-admin-password -o yaml</pre>
</div>
</div>
<div class="paragraph">
<p>The password for the automation controller instance is listed in the <code>metadata</code> field in the output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ oc get secret/example-admin-password -o yaml

apiVersion: v1
data:
  password: ODhLSzJVanByTXVtVEdmUmVQMzdxZXJXazByT3VYUDM=
kind: Secret
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: '{"apiVersion":"v1","kind":"Secret","metadata":{"labels":{"app.kubernetes.io/component":"automationcontroller","app.kubernetes.io/managed-by":"automationcontroller-operator","app.kubernetes.io/name":"example","app.kubernetes.io/operator-version":"","app.kubernetes.io/part-of":"example"},"name":"example-admin-password","namespace":"ansible-automation-platform"},"stringData":{"password":"88KK2UjprMumTGfReP37qerWk0rOuXP3"}}'
  creationTimestamp: "2021-12-03T00:02:24Z"
  labels:
    app.kubernetes.io/component: automationcontroller
    app.kubernetes.io/managed-by: automationcontroller-operator
    app.kubernetes.io/name: example
    app.kubernetes.io/operator-version: ""
    app.kubernetes.io/part-of: example
  name: example-admin-password
  namespace: ansible-automation-platform
  resourceVersion: "185013"
  uid: 391b22f0-52a2-4240-b942-665f1f589359</pre>
</div>
</div>
<div class="paragraph">
<p>For this example, the password is <code>88KK2UjprMumTGfReP37qerWk0rOuXP3</code>.</p>
</div>
</div>
</div>
<div class="sect2 _additional-resources">
<h3 id="_additional_resources_3">5.4. Additional resources</h3>
<div class="ulist">
<ul>
<li>
<p>For more information on running operators on OpenShift Container Platform, navigate to the <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/">OpenShift Container Platform product documentation</a> and click the <em>Operators - Working with Operators in OpenShift Container Platform</em> guide.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-05-19 07:54:28 -0400
</div>
</div>
</body>
</html>