<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Red Hat Ansible Automation Platform Upgrade and Migration Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article Role ARG Spec">
<div id="header">
<h1>Red Hat Ansible Automation Platform Upgrade and Migration Guide</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="upgrading-platform">Upgrading your Red Hat Ansible Automation Platform</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>To upgrade your Red Hat Ansible Automation Platform to the later version, download the desired version of the Ansible Automation Platform installer. Configure it with the same parameters you have used in previous installations, configure any new parameters, then run the installer.</p>
</div>
<div class="paragraph">
<p>In some cases, you may need to configure other settings if you plan on upgrading other components of your Ansible Automation Platform, such as automation controller. The following sections describes these steps in further detail.</p>
</div>
<div class="sect2">
<h3 id="con-my-concept-module-a_upgrading-platform">Upgrade planning</h3>
<div class="paragraph _abstract">
<p>Depending on your installation, there may be several changes to consider as you attempt to upgrade your Red Hat Ansible Automation Platform.</p>
</div>
<div class="paragraph">
<div class="title">Upgrading automation controller</div>
<p>If you plan on upgrading your automation controller instance along with your Ansible Automation Platform, review the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Even if you already have a valid license from a previous version, you still must provide your credentials or a subscriptions manifest upon upgrading to the latest version of automation controller. See <a href="https://docs.ansible.com/automation-controller/latest/html/userguide/import_license.html">Import a subscription</a> in the Automation Controller User Guide.</p>
</li>
<li>
<p>If you need to upgrade Red Hat Enterprise Linux and automation controller, you will need to do a backup and restore of your automation controller data. Refer to <a href="https://docs.ansible.com/automation-controller/latest/html/administration/backup_restore.html#ag-backup-restore">Back up and restoring Tower</a> for further detail.</p>
</li>
<li>
<p>Clustered upgrades require special attention to instance and instance groups prior to starting the upgrade. See <a href="https://docs.ansible.com/automation-controller/latest/html/administration/clustering.html#ag-clustering">Clustering</a> for details.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once you have completed the necessary changes during upgrade planning, proceed by downloading the desired version of the Ansible Automation Platform installer.</p>
</div>
</div>
<div class="sect2">
<h3 id="_choosing_and_obtaining_a_red_hat_ansible_automation_platform_installer">Choosing and obtaining a Red Hat Ansible Automation Platform installer</h3>
<div class="paragraph _abstract">
<p>Choose the Red Hat Ansible Automation Platform installer you need based on your Red Hat Enterprise Linux environment internet connectivity. Review the scenarios below and determine which Red Hat Ansible Automation Platform installer meets your needs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>A valid Red Hat customer account is required to access Red Hat Ansible Automation Platform installer downloads on the Red Hat Customer Portal.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">Installing with internet access</div>
<p>Choose the Red Hat Ansible Automation Platform installer if your Red Hat Enterprise Linux environment is connected to the internet. Installing with internet access will retrieve the latest required repositories, packages, and dependencies.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to <a href="https://access.redhat.com/downloads/content/480" class="bare">https://access.redhat.com/downloads/content/480</a></p>
</li>
<li>
<p>Click <strong>Download Now</strong> for the <strong>Ansible Automation Platform &lt;latest-version&gt; Setup</strong>.</p>
</li>
<li>
<p>Extract the files:</p>
<div class="listingblock">
<div class="content">
<pre>$ tar xvzf ansible-automation-platform-setup-&lt;latest-version&gt;.tar.gz</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Installing without internet access</div>
<p>Use the Red Hat Ansible Automation Platform <strong>Bundle</strong> installer if you are unable to access the internet, or would prefer not to install separate components and dependencies from online repositories. Access to Red Hat Enterprise Linux repositories is still needed. All other dependencies are included in the tar archive.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to <a href="https://access.redhat.com/downloads/content/480" class="bare">https://access.redhat.com/downloads/content/480</a></p>
</li>
<li>
<p>Click <strong>Download Now</strong> for the <strong>Ansible Automation Platform &lt;latest-version&gt; Setup Bundle</strong>.</p>
</li>
<li>
<p>Extract the files:</p>
<div class="listingblock">
<div class="content">
<pre>$ tar xvzf ansible-automation-platform-setup-bundle-&lt;latest-version&gt;.tar.gz</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="proc-editing-inventory-file-for-updates_upgrading-platform">Setting up the inventory file</h3>
<div class="paragraph">
<p>To upgrade using the Red Hat Ansible Automation Platform installer, edit the <code>inventory</code> file found in the installer to match your desired configuration. When editing the <code>inventory</code> file, you can use the <code>inventory</code> file parameters from your previous Ansible Automation Platform setup to keep the same configuration as before. You can also enable any new parameters in the <code>inventory</code> file that was introduced in the new version of the Red Hat Ansible Automation Platform.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Navigate to the installer:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Bundled installer</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>$ cd ansible-automation-platform-setup-bundle-&lt;latest-version&gt;</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Online installer</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>$ cd ansible-automation-platform-setup-&lt;latest-version&gt;</pre>
</div>
</div>
</dd>
</dl>
</div>
</li>
<li>
<p>Open the <code>inventory</code> file with a text editor.</p>
</li>
<li>
<p>Edit the <code>inventory</code> file parameters to match the <code>inventory</code> file in your previous version of Red Hat Ansible Automation Platform.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To review information about the inventory file requirements for your specific intsallation scenario, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.1/html/red_hat_ansible_automation_platform_installation_guide/planning-installation#supported_installation_scenarios">Red Hat Ansible Automation Platform Installation Guide</a>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Optional: Edit the <code>inventory</code> file parameters to enable any new features introduced in the new version of the Red Hat Ansible Automation Platform.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For more information about any new features and how to enable them, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.1/html/red_hat_ansible_automation_platform_installation_guide/index">Product Documentation for Red Hat Ansible Automation Platform</a> to search for specific features and their configurations. Review the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.1/html/red_hat_ansible_automation_platform_release_notes/index">Red Hat Ansible Automation Platform Release Notes</a> for a full list of features in each version release.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_red_hat_ansible_automation_platform_installer_setup_script">Running the Red Hat Ansible Automation Platform installer setup script</h3>
<div class="paragraph _abstract">
<p>You can run the setup script once you have finished updating the <code>inventory</code> file to match your previous Ansible Automation Platform installation.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run the <code>setup.sh</code> script</p>
<div class="listingblock">
<div class="content">
<pre>$ ./setup.sh</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The installation will begin.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id=""assembly-migrate-isolated-execution-nodes">Upgrading isolated nodes to execution nodes</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>When upgrading from version 1.x to the latest version of the Red Hat Ansible Automation Platform, platform administrators will need to migrate the data from their legacy isolated nodes into execution nodes, which will be necessary to deploy automation mesh.</p>
</div>
<div class="paragraph">
<p>To do so, this guide outlines the steps to perform a side-by-side migration. This migration involves duplicating your original Red Hat Ansible Automation Platform instance with all its data and nodes, then performing an upgrade on the duplicate instance. This ensures that the data on your original automation environment will remain untouched while performing your upgrade and migration process.</p>
</div>
<div class="paragraph">
<p>Below is a summary of steps needed to complete the migration process:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Backup original instance</p>
</li>
<li>
<p>Deploy new instance for a side-by-side upgrade</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Recreate instance groups in the new instance using Ansible Tower</p>
</li>
</ol>
</div>
</li>
<li>
<p>Restore original backup to new instance</p>
</li>
<li>
<p>Set up execution nodes and upgrade instance to Red Hat Ansible Automation Platform 2.1</p>
</li>
<li>
<p>Configure upgraded Controller instance</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="con-backup-aap_upgrade-and-migration">Back up your Ansible Automation Platform instance</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to your <code>ansible-tower-setup-latest</code> directory</p>
</li>
<li>
<p>Back up the content and configuration of your current Ansible Automation Platform instance by running the <code>./setup.sh</code> script following the example below:</p>
<div class="listingblock">
<div class="content">
<pre>$ ./setup.sh -e ‘backup_dir=/ansible/mybackup’ -e ‘use_compression=True’ @credentials.yml -b <b class="conum">(1)</b><b class="conum">(2)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>backup_dir</code> specifies a directory to save your backup to</p>
</li>
<li>
<p><code>@credentials.yml</code> passes the password variables and their values encrypted via <code>ansible-vault</code></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>With a successful backup, a backup file will be created at <code>/ansible/mybackup/tower-backup-latest.tar.gz</code> .</p>
</div>
<div class="paragraph">
<p>This backup will be necessary later to migrate content from your old instance to the new one.</p>
</div>
</div>
<div class="sect2">
<h3 id="proc-new-aap-instance-upgrade_upgrade-and-migration">Deploy a new instance for a side-by-side upgrade</h3>
<div class="paragraph">
<p>To proceed with the side-by-side upgrade process, deploy a second instance of Ansible Tower 3.8.x with the same instance groups configurations. This new instance will receive the content and configuration from your original instance, and will later be upgraded to Red Hat Ansible Automation Platform 2.1.</p>
</div>
<div class="sect3">
<h4 id="_deploy_a_new_instance_of_ansible_tower">Deploy a new instance of Ansible Tower</h4>
<div class="paragraph">
<p>Start by downloading the Tower installer version that matches your original Tower instance version, then running the installer:</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download the Tower installer version that matches your original Tower instance by navigating to this link: <a href="https://releases.ansible.com/ansible-tower/setup/" class="bare">https://releases.ansible.com/ansible-tower/setup/</a></p>
</li>
<li>
<p>Navigate to the installer, then open the <code>inventory</code> file using a text editor to configure the <code>inventory</code> file for a Tower installation:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In addition to any Tower configurations, remove any fields containing <code>isolated_group</code> or <code>instance_group</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For more information about installing Tower using the Ansible Automation Platform installer, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.1/html/red_hat_ansible_automation_platform_installation_guide/index">Ansible Automation Platform Instllation Guide</a> for your specific installation scenario.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Run the <code>setup.sh</code> script to begin the installation.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>With the new instance now installed, you will need to configure the Tower settings to match the instance groups from your original Tower instance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_recreate_instance_groups_in_the_new_instance">Recreate instance groups in the new instance</h4>
<div class="paragraph">
<p>Log in to your new instance of Ansible Tower and configure the instance groups to match the same instance group configuration as your old instance.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Make note of all instance groups from your original Tower instance. You will need to recreate these groups in your new instance.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Log in to your new instance of Tower.</p>
</li>
<li>
<p>On the side panel, navigate to Administration &gt; <strong>Instance groups</strong>.</p>
</li>
<li>
<p>Recreate instance groups from your original instance:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <strong>+</strong> &gt; <strong>Create instance group</strong>.</p>
</li>
<li>
<p>Enter a Name that matches an instance group from your original instance, then click <strong>Save</strong>.</p>
</li>
<li>
<p>Repeat until all instance groups from your original instance have been recreated.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="proc-restore-aap-backup_upgrade-and-migration">Restore backup to new instance</h3>
<div class="paragraph">
<p>Running the <code>./setup.sh</code> script with the <code>restore_backup_file</code> flag will migrate content from the backup file of your original 1.x instance to the new instance, effectively migrating all job histories, templates, and other Ansible Automation Platform related content.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the following command:</p>
<div class="listingblock">
<div class="content">
<pre>$ ./setup.sh -r -e ‘restore_backup_file=/mybackup/tower-backup-latest.tar.gz’ -e ‘user_compression=True’ -e @credentials.yml -r -- --ask-vault-pass <b class="conum">(1)</b><b class="conum">(2)</b><b class="conum">(3)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>restore_backup_file</code> specifies the location of the Ansible Automation Platform backup database</p>
</li>
<li>
<p><code>use_compression</code> is set to <code>True</code> due to compression being used during the backup process</p>
</li>
<li>
<p><code>-r</code> sets the restore database option to <code>True</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Log in to your new RHEL 8 Tower 3.8 instance and check if the content from your original instance content have been successfully restored:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Navigate to <strong>Administration</strong> &gt; <strong>Instance groups</strong>. The recreated instance groups should now contain the <strong>Total Jobs</strong> from your original instance.</p>
</li>
<li>
<p>Using the side navigation panel, check that your content has been imported from your original instance, including Jobs, Templates, Inventories, Credentials, and Users.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You now have a new instance of Ansible Tower with all the Ansible content from your original instance.</p>
</div>
<div class="paragraph">
<p>You will upgrade this new instance to Ansible Automation Platform 2.1 so that you keep all your previous data without overwriting your original instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="proc-upgrade-installer_upgrade-and-migration">Upgrading to Ansible Automation Platform 2.1</h3>
<div class="paragraph">
<p>To upgrade your new instance of Ansible Automation Platform to Ansible Automation Platform 2.1, start by copying the <code>inventory</code> file from your original instance to your new instance, then running the installer. The Red Hat Ansible Automation Platform installer will detect a pre-2.1 and offer an upgraded <code>inventory</code> file for you to continue with the upgrade process:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the latest installer for Red Hat Ansible Automation Platform here: <a href="https://access.redhat.com/downloads/content/480" class="bare">https://access.redhat.com/downloads/content/480</a></p>
</li>
<li>
<p>Extract the files:</p>
<div class="listingblock">
<div class="content">
<pre>$ tar xvzf ansible-automation-platform-setup-&lt;latest-version&gt;.tar.gz</pre>
</div>
</div>
</li>
<li>
<p>Navigate into your Ansible Automation Platform installation directory:</p>
<div class="listingblock">
<div class="content">
<pre>$ cd ansible-automation-platform-setup-&lt;latest-version&gt;/</pre>
</div>
</div>
</li>
<li>
<p>Copy the <code>inventory</code> file from your original instance into the directory of the latest installer:</p>
<div class="listingblock">
<div class="content">
<pre>$ cp ansible-tower-setup-3.8.x.x/inventory ansible-automation-platform-setup-&lt;latest-version&gt;</pre>
</div>
</div>
</li>
<li>
<p>Run the <code>setup.sh</code> script:</p>
<div class="listingblock">
<div class="content">
<pre>$ ./setup.sh</pre>
</div>
</div>
<div class="paragraph">
<p>The setup script will halt, stating that a “pre-2.x inventory” was detected, but will offer a new file called <code>inventory.new.ini</code> where you can continue upgrading your original instance.</p>
</div>
</li>
<li>
<p>Open <code>inventory.new.ini</code> with a text editor.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
By running the setup script, the Installer modified a few fields from your original inventory file, such as renaming [tower] to [automationcontroller].
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Modify the newly generated <code>inventory.new.ini</code> file to configure your automation mesh by assigning relevant variables, nodes, and relevant node-to-node peer connections:</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The design of your automation mesh topology depends on the automation needs of your environment. While the example below offers one scenario in which you can design your automation mesh, review the full <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.1/html/red_hat_ansible_automation_platform_automation_mesh_guide/index">Ansible Automation Platform automation mesh guide</a> for information on designing it for your needs.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example inventory file with a standard control plane consisting of three nodes utilizing hop nodes:</div>
<div class="content">
<pre>[automationcontroller]
control-plane-1.example.com
control-plane-2.example.com
control-plane-3.example.com

[automationcontroller:vars]
node_type=control <b class="conum">(1)</b>
peers=execution_nodes <b class="conum">(2)</b>


[execution_nodes]
execution-node-1.example.com peers=execution-node-2.example.com
execution-node-2.example.com peers=execution-node-3.example.com
execution-node-3.example.com peers=execution-node-4.example.com
execution-node-4.example.com peers=execution-node-5.example.com node_type=hop
execution-node-5.example.com peers=execution-node-6.example.com node_type=hop <b class="conum">(3)</b>
execution-node-6.example.com peers=execution-node-7.example.com
execution-node-7.example.com

[execution_nodes:vars]
node_type=execution</pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specifies a control node that run project and inventory updates and system jobs, but not regular jobs. Execution capabilities are disabled on these nodes.</p>
</li>
<li>
<p>Specifies peer relationships for node-to-node connections in the <code>[execution_nodes]</code> group.</p>
</li>
<li>
<p>Specifies hop nodes, which routes traffic to other execution nodes. Hop nodes cannot execute automation.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Once you have finished configuring your <code>inventory.new.ini</code> for automation mesh, run the setup script using <code>inventory.new.ini</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ ./setup.sh -i inventory.new.ini -e @credentials.yml -- --ask-vault-pass</pre>
</div>
</div>
</li>
<li>
<p>Once the installation completes, you can verify that your Ansible Automation Platform has been installed successfully by logging in to the Ansible Automation Platform dashboard UI across all automation controller nodes.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For general information on using the Ansible Automation Platform installer, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.1/html/red_hat_ansible_automation_platform_installation_guide/index">Red Hat Ansible Automation Platform installation guide</a>.</p>
</li>
<li>
<p>For more information about automation mesh, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.1/html/red_hat_ansible_automation_platform_automation_mesh_guide/index">Ansible Automation Platform automation mesh guide</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="proc-configure-upgraded-controller_upgrade-and-migration">Configure your upgraded Controller instance and instance groups</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to new Controller instance</p>
</li>
<li>
<p>Content from old instance, such as credentials, jobs, inventories should now be visible on your Controller instance</p>
</li>
<li>
<p>Navigate to <strong>Administration</strong> &gt; <strong>Instance Groups</strong></p>
</li>
<li>
<p>Associate execution nodes by clicking on an instance group, then click the Instances tab</p>
</li>
<li>
<p>Click <strong>Associate</strong>. Select the node(s) to associate to this instance group, then click <strong>Save</strong>.</p>
</li>
<li>
<p>You can also modify the default instance to disassociate your new execution nodes.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="upgrading-to-ees">Upgrading to automation execution environments</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>If upgrading from older versions of automation controller to 4.0 or later, the controller has the ability to detect previous versions of virtual environments associated with Organizations, Inventory, and Job Templates; and inform you that you will need to migrate to the new automation execution environments model. A brand new installation of automation controller creates two virtualenvs during installation&#8212;&#8203;one is used to run the controller itself, while the other is used to run Ansible. Like legacy virtual environments, automation execution environments allow the controller to run in a stable environment, while allowing you to add or update modules to your automation execution environments as necessary to run your playbooks.</p>
</div>
<div class="paragraph">
<div class="title">Migrate legacy venvs to automation execution environments</div>
<p>You can have the exact same setup in an automation execution environment that you had in a prior custom virtual environment by migrating them to the new automation execution environment. Use the awx-manage commands in this section to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>list of all the current custom virtual environments and their paths (<code>list_custom_venvs</code>)</p>
</li>
<li>
<p>view the resources that rely a particular custom virtual environment (<code>custom_venv_associations</code>)</p>
</li>
<li>
<p>export a particular custom virtual environment to a format that can be used to migrate to an automation execution environment (<code>export_custom_venv</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The below workflow describes how to migrate from legacy venvs to automation execution environments using the <code>awx-manage</code> command.</p>
</div>
<div class="sect2">
<h3 id="migrating-virt-evn-to-ee">Migrating virtual envs to automation execution environments</h3>
<div class="paragraph _abstract">
<p>Use the following sections to assist with additional steps in the migration process once you have upgraded to Red Hat Ansible Automation Platform 2.0 and automation controller 4.0.</p>
</div>
<div class="sect3">
<h4 id="list-custom-virts">Listing custom virtual environments</h4>
<div class="paragraph _abstract">
<p>You can list the virtual environments on your automation controller instance using the <code>awx-manage</code> command.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>SSH into your automation controller instance and run:</p>
<div class="listingblock">
<div class="content">
<pre>$ awx-manage list_custom_venvs</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>A list of discovered virtual environments will appear.</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Discovered virtual environments:
/var/lib/awx/venv/testing
/var/lib/venv/new_env

To export the contents of a virtual environment, re-run while supplying the path as an argument:
awx-manage export_custom_venv /path/to/venv</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="list-custom-venvs-associations">Viewing objects associated with a custom virtual environment</h4>
<div class="paragraph _abstract">
<p>View the organizations, jobs, and inventory sources associated with a custom virtual environment using the <code>awx-manage</code> command.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>SSH into your automation controller instance and run:</p>
<div class="listingblock">
<div class="content">
<pre>$ awx-manage custom_venv_associations /path/to/venv</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>A list of associated objects will appear.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>inventory_sources:
- id: 15
  name: celery
job_templates:
- id: 9
  name: Demo Job Template @ 2:40:47 PM
- id: 13
  name: elephant
organizations
- id: 3
  name: alternating_bongo_meow
- id: 1
  name: Default
projects: []</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="select-custom-venv-export">Selecing the custom virtual environment to export</h4>
<div class="paragraph _abstract">
<p>Select the custom virtual environment you wish to export using <code>awx-manage export_custom_venv</code> command.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>SSH into your automation controller instance and run:</p>
<div class="listingblock">
<div class="content">
<pre>$ awx-manage export_custom_venv /path/to/venv</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The output from this command will show a <code>pip freeze</code> of what is in the specified virtual environment. This information can be copied into a <code>requirements.txt</code> file for Ansible Builder to use for creating a new automation execution environments image</p>
</div>
<div class="listingblock">
<div class="content">
<pre>numpy==1.20.2
pandas==1.2.4
python-dateutil==2.8.1
pytz==2021.1
six==1.16.0

To list all available custom virtual environments run:
awx-manage list_custom_venvs</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Pass the <code>-q</code> flag when running `awx-manage list_custom_venvs`to reduce output.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2 _additional-resources">
<h3 id="_additional_resources">Additional resources</h3>
<div class="ulist">
<ul>
<li>
<p>See the <a href="https://access.redhat.com/documentation/en-us/red_hat_ansible_automation_platform/2.1/html-single/red_hat_ansible_automation_platform_creator_guide/index?lb_target=production">Red Hat Ansible Automation Platform Creator Guide</a> for more information of migrating to automation execution environments.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-04-19 15:40:41 -0400
</div>
</div>
</body>
</html>